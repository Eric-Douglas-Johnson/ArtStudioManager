@page "/classes/{classId:guid?}"
@rendermode @(new InteractiveServerRenderMode(prerender:true))

<h3>Edit Class</h3>

@if (artClass == null) { throw new InvalidOperationException("Art Class could not be initialized."); }

<EditForm Model="@artClass" OnValidSubmit="Save" OnInvalidSubmit="ShowSubmitError">
    <div>
        <label for="name">Name</label>
        <InputText id="name" @bind-Value="artClass.Name" class="form-control"></InputText>
    </div>
    <div>
        <label for="desc">Description</label>
        <InputText id="desc" @bind-Value="artClass.Description" class="form-control"></InputText>
    </div>
    <div>
        <label for="dateandtime">Date and Time</label>
        <InputDate id="dateandtime" Type="InputDateType.DateTimeLocal" @bind-Value="artClass.DateAndTime" class="form-control"></InputDate>
    </div>
</EditForm>

@code {
    private ArtClass? artClass;

    private string newInstructorName = "";
    private string newMemberName = "";
    private string newCustomerName = "";

    [Parameter]
    public Guid ClassId { get; set; }

    protected override void OnInitialized()
    {
        artClass = new ArtClass(ClassId, new ArtClassTestDataLoader());
    }

    private void Save()
    {
        artClass.Instructors.Add(new Instructor() { Name = newInstructorName });
    }

    private void ShowSubmitError()
    {
        
    }
}
