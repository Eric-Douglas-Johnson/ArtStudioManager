@page "/classes/attendance/{classId:guid?}"
@using Microsoft.AspNetCore.Components.QuickGrid;
@rendermode @(new InteractiveServerRenderMode(prerender:false))

<h3>Class Attendance</h3>

@if (artClass == null) { throw new InvalidOperationException("Art Class could not be initialized."); }

<QuickGrid Items="@queryableAttendees">
    <PropertyColumn Property="@(p => p.Name)" Sortable="true" Title="Attendee Name" />
</QuickGrid>
<br />
<button class="btn btn-primary" @onclick="@(() => AddMember())">Add Member</button>
<button class="btn btn-primary" @onclick="@(() => AddCustomer())">Add Customer</button>

@code {
    private ArtClass? artClass;
    private IQueryable<Artist>? queryableAttendees;

    [Parameter]
    public Guid ClassId { get; set; }

    protected override void OnInitialized()
    {
        artClass = new ArtClass(ClassId, new ArtClassTestDataLoader());

        if (artClass.Attendees is ICollection<Artist> attendees)
        {
            queryableAttendees = attendees.AsQueryable<Artist>();
        }
    }

    private void AddMember()
    {
        
    }

    private void AddCustomer()
    {

    }
}
